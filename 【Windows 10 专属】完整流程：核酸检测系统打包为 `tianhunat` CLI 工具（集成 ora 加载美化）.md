# ã€Windows 10 ä¸“å±ã€‘å®Œæ•´æµç¨‹ï¼šæ ¸é…¸æ£€æµ‹ç³»ç»Ÿæ‰“åŒ…ä¸º `tianhunat` CLI å·¥å…·ï¼ˆé›†æˆ ora åŠ è½½ç¾åŒ–ï¼‰


æœ¬æµç¨‹ä¸“ä¸º Windows 10 ç³»ç»Ÿè®¾è®¡ï¼Œåœ¨åŸæœ‰å®Œæ•´æµç¨‹åŸºç¡€ä¸Šæ–°å¢ `ora` åŠ è½½åŠ¨ç”»ç¾åŒ–åŠŸèƒ½ï¼Œæ¶µç›– **GitHub ä»“åº“å‡†å¤‡ â†’ CLI åŒ…å¼€å‘ï¼ˆå«åŠ è½½åŠ¨ç”»ï¼‰â†’ npm å‘å¸ƒ â†’ ç”¨æˆ·ä½¿ç”¨** å…¨é“¾è·¯ï¼Œæ‰€æœ‰æ“ä½œåŸºäº Windows 10 ç»ˆç«¯ï¼ˆCMD/PowerShellï¼‰ï¼Œæä¾›æˆªå›¾çº§è¯¦ç»†æŒ‡ä»¤ã€å®Œæ•´ä»£ç å’Œé—®é¢˜æ’æŸ¥æ–¹æ¡ˆï¼Œé›¶ Mac ç›¸å…³å†…å®¹ã€‚

## å‰ç½®å‡†å¤‡ï¼ˆWindows 10 ç¯å¢ƒï¼‰

### 1.1 å®‰è£…å¿…å¤‡å·¥å…·

1. **å®‰è£… Node.jsï¼ˆå« npmï¼‰**

    - è®¿é—® [Node.js å®˜ç½‘](https://nodejs.org/)ï¼Œä¸‹è½½ **LTS ç‰ˆæœ¬**ï¼ˆæ¨è v18.xï¼Œè‡ªå¸¦ npmï¼‰

    - åŒå‡»å®‰è£…åŒ…ï¼Œå‹¾é€‰ã€ŒAdd to PATHã€ï¼ˆè‡ªåŠ¨æ·»åŠ ç¯å¢ƒå˜é‡ï¼‰ï¼Œå…¶ä½™é»˜è®¤ä¸‹ä¸€æ­¥å³å¯

    - éªŒè¯å®‰è£…ï¼šæ‰“å¼€ CMD ç»ˆç«¯ï¼Œè¾“å…¥ `node -v` å’Œ `npm -v`ï¼Œèƒ½æ˜¾ç¤ºç‰ˆæœ¬å·å³æˆåŠŸï¼ˆç¤ºä¾‹ï¼š`v18.17.0` / `9.6.7`ï¼‰

2. **æ³¨å†Œå¿…è¦è´¦å·**

    - æ³¨å†Œ [GitHub è´¦å·](https://github.com/)ï¼šå­˜æ”¾ 4 å¥—ç³»ç»Ÿæºç ï¼ˆéœ€å…¬å¼€ä»“åº“ï¼‰

    - æ³¨å†Œ [npm è´¦å·](https://www.npmjs.com/)ï¼šå‘å¸ƒ CLI å·¥å…·ï¼ˆéœ€éªŒè¯é‚®ç®±ï¼Œå¦åˆ™æ— æ³•å‘å¸ƒï¼‰

3. **å®‰è£… Gitï¼ˆå¿…è£…ï¼Œæ”¯æŒæºç ä¸‹è½½ï¼‰**

    - è®¿é—® [Git å®˜ç½‘](https://git-scm.com/)ï¼Œä¸‹è½½ Windows ç‰ˆæœ¬

    - å®‰è£…æ­¥éª¤ï¼š

        - å‹¾é€‰ã€ŒUse Git from Command Promptã€ï¼ˆæ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼‰

        - å…¶ä½™æ­¥éª¤é»˜è®¤ä¸‹ä¸€æ­¥ï¼Œæœ€åå‹¾é€‰ã€ŒGit Bash Hereã€ï¼ˆæ–¹ä¾¿å³é”®æ‰“å¼€ç»ˆç«¯ï¼‰

    - éªŒè¯å®‰è£…ï¼šæ‰“å¼€ CMD è¾“å…¥ `git --version`ï¼Œæ˜¾ç¤ºç‰ˆæœ¬å·å³æˆåŠŸï¼ˆç¤ºä¾‹ï¼š`git version 2.42.0.windows.1`ï¼‰

### 1.2 æ•´ç†ç³»ç»Ÿæºç å¹¶ä¸Šä¼  GitHub

å‡è®¾ä½ çš„ 4 å¥—ç³»ç»Ÿå·²åœ¨æœ¬åœ°ï¼ˆå¦‚ `D:\æ ¸é…¸æ£€æµ‹ç³»ç»Ÿ\` ç›®å½•ï¼‰ï¼Œéœ€åˆ†åˆ«ä¸Šä¼ åˆ° GitHub 4 ä¸ªå…¬å¼€ä»“åº“ï¼Œç¡®ä¿ç”¨æˆ·å¯é€šè¿‡ CLI ä¸‹è½½ï¼š

|ç³»ç»Ÿç±»å‹|æœ¬åœ°ç›®å½•ç¤ºä¾‹|GitHub ä»“åº“åï¼ˆå»ºè®®ï¼‰|ä»“åº“åœ°å€ç¤ºä¾‹|
|---|---|---|---|
|ç®¡ç†ç³»ç»Ÿ|D:\æ ¸é…¸æ£€æµ‹ç³»ç»Ÿ\admin|tianhunat-admin|[https://github.com/](https://github.com/)ä½ çš„ç”¨æˆ·å/tianhunat-admin|
|æŸ¥è¯¢ç³»ç»Ÿ|D:\æ ¸é…¸æ£€æµ‹ç³»ç»Ÿ\query|tianhunat-query|[https://github.com/](https://github.com/)ä½ çš„ç”¨æˆ·å/tianhunat-query|
|é¢„çº¦ç³»ç»Ÿ|D:\æ ¸é…¸æ£€æµ‹ç³»ç»Ÿ\reserve|tianhunat-reserve|[https://github.com/](https://github.com/)ä½ çš„ç”¨æˆ·å/tianhunat-reserve|
|å¤§æ•°æ®çœ‹æ¿|D:\æ ¸é…¸æ£€æµ‹ç³»ç»Ÿ\dashboard|tianhunat-dashboard|[https://github.com/](https://github.com/)ä½ çš„ç”¨æˆ·å/tianhunat-dashboard|
#### ä¸Šä¼ æºç åˆ° GitHub æ­¥éª¤ï¼ˆWindows 10 æ“ä½œï¼‰

ä»¥ã€Œç®¡ç†ç³»ç»Ÿã€ä¸ºä¾‹ï¼Œå…¶ä½™ 3 ä¸ªç³»ç»ŸæŒ‰ç›¸åŒæ­¥éª¤æ“ä½œï¼š

1. æ‰“å¼€ GitHub å®˜ç½‘ï¼Œç™»å½•åç‚¹å‡»å³ä¸Šè§’ã€Œ+ã€â†’ã€ŒNew repositoryã€

2. å¡«å†™ä»“åº“ä¿¡æ¯ï¼š

    - Repository nameï¼š`tianhunat-admin`ï¼ˆå¿…é¡»ä¸ä¸Šè¡¨ä¸€è‡´ï¼‰

    - Descriptionï¼šæ ¸é…¸æ£€æµ‹ç®¡ç†ç³»ç»Ÿï¼ˆå¯é€‰ï¼Œä¾¿äºè¯†åˆ«ï¼‰

    - Visibilityï¼š**Public**ï¼ˆå¿…é¡»å…¬å¼€ï¼Œå¦åˆ™ CLI æ— æ³•ä¸‹è½½ï¼‰

    - å‹¾é€‰ã€ŒAdd a README fileã€ï¼ˆå¯é€‰ï¼Œå»ºè®®æ·»åŠ ï¼‰

    - ç‚¹å‡»ã€ŒCreate repositoryã€ç”Ÿæˆä»“åº“

3. æœ¬åœ°ä¸Šä¼ ï¼ˆç”¨ Git Bashï¼Œé¿å… CMD æƒé™é—®é¢˜ï¼‰ï¼š

    - å³é”®ç‚¹å‡»æœ¬åœ° `admin` ç›®å½•ï¼ˆå¦‚ `D:\æ ¸é…¸æ£€æµ‹ç³»ç»Ÿ\admin`ï¼‰â†’ã€ŒGit Bash Hereã€

    - æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆæ›¿æ¢ `ä½ çš„ç”¨æˆ·å` å’Œ `ä½ çš„ä»“åº“åœ°å€` ä¸ºçœŸå®å€¼ï¼‰ï¼š

        ```Bash
        
        # åˆå§‹åŒ–æœ¬åœ°ä»“åº“
        git init
        # æ·»åŠ æ‰€æœ‰æºç æ–‡ä»¶
        git add .
        # æäº¤æäº¤è®°å½•ï¼ˆå¼•å·å†…å†…å®¹å¯è‡ªå®šä¹‰ï¼‰
        git commit -m "åˆå§‹åŒ–æ ¸é…¸æ£€æµ‹ç®¡ç†ç³»ç»Ÿæºç "
        # åˆ‡æ¢ä¸»åˆ†æ”¯ä¸º mainï¼ˆGitHub é»˜è®¤åˆ†æ”¯åï¼‰
        git branch -M main
        # å…³è” GitHub è¿œç¨‹ä»“åº“ï¼ˆæ›¿æ¢ä¸ºä½ çš„ä»“åº“åœ°å€ï¼‰
        git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/tianhunat-admin.git
        # æ¨é€æºç åˆ° GitHubï¼ˆé¦–æ¬¡æ¨é€éœ€ç™»å½•ï¼‰
        git push -u origin main
        ```

    - ç™»å½•éªŒè¯ï¼šå¼¹å‡ºç™»å½•æ¡†æ—¶ï¼Œé€‰æ‹©ã€ŒUse a personal access tokenã€ï¼Œè¾“å…¥ GitHub ä¸ªäººä»¤ç‰Œï¼ˆç”Ÿæˆæ–¹å¼ï¼šGitHub å®˜ç½‘ â†’ Settings â†’ Developer settings â†’ Personal access tokens â†’ Generate new tokenï¼Œå‹¾é€‰ `repo` æƒé™ï¼Œå¤åˆ¶ä»¤ç‰Œç²˜è´´ï¼‰

    - æ¨é€æˆåŠŸåï¼Œåˆ·æ–° GitHub ä»“åº“é¡µé¢ï¼Œå¯çœ‹åˆ°æœ¬åœ°æºç å·²åŒæ­¥

---

## æ­¥éª¤ 1ï¼šåœ¨ Windows 10 æœ¬åœ°åˆ›å»º CLI å·¥å…·é¡¹ç›®

### 1.1 æ‰“å¼€ Windows ç»ˆç«¯ï¼ˆCMD æ¨èï¼‰

- æŒ‰ä¸‹ `Win + R`ï¼Œè¾“å…¥ `cmd`ï¼Œå›è½¦æ‰“å¼€ CMD ç»ˆç«¯ï¼ˆæ“ä½œæ›´ç®€æ´ï¼Œå…¼å®¹æ‰€æœ‰å‘½ä»¤ï¼‰

- è‹¥éœ€ç®¡ç†å‘˜æƒé™ï¼šå¼€å§‹èœå• â†’ æœç´¢ã€ŒCMDã€â†’ å³é”®ã€Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€ï¼ˆåç»­å®‰è£…å…¨å±€åŒ…æ—¶å¯èƒ½éœ€è¦ï¼‰

### 1.2 åˆ›å»ºå¹¶è¿›å…¥ CLI é¡¹ç›®ç›®å½•

åœ¨ CMD ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆæŒ‰è‡ªå·±ä¹ æƒ¯é€‰æ‹©ç›®å½•ï¼Œç¤ºä¾‹ç”¨ D ç›˜ï¼Œé¿å…ä¸­æ–‡è·¯å¾„ï¼‰ï¼š

```Plain Text

:: è¿›å…¥ D ç›˜ï¼ˆå¯æ›¿æ¢ä¸ºå…¶ä»–ç›˜ç¬¦ï¼Œå¦‚ C:ã€E:ï¼‰
D:

:: åˆ›å»º CLI é¡¹ç›®æ ¹æ–‡ä»¶å¤¹
mkdir tianhunat-cli

:: è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼ˆåç»­æ‰€æœ‰æ“ä½œå‡åœ¨æ­¤ç›®å½•æ‰§è¡Œï¼‰
cd tianhunat-cli
```

æ‰§è¡Œåï¼Œç»ˆç«¯è·¯å¾„æ˜¾ç¤ºä¸º `D:\tianhunat-cli>`ï¼Œè¡¨ç¤ºå·²è¿›å…¥é¡¹ç›®ç›®å½•ã€‚

### 1.3 åˆå§‹åŒ– package.json æ–‡ä»¶ï¼ˆé¡¹ç›®é…ç½®æ ¸å¿ƒï¼‰

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè‡ªåŠ¨ç”Ÿæˆ `package.json`ï¼ˆCLI é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼‰ï¼š

```Plain Text

npm init -y
```

- æ‰§è¡Œåï¼Œ`tianhunat-cli` ç›®å½•ä¸‹ä¼šç”Ÿæˆ `package.json` æ–‡ä»¶ï¼Œé»˜è®¤å†…å®¹å¦‚ä¸‹ï¼ˆåç»­ä¼šä¿®æ”¹ï¼‰ï¼š

    ```JSON
    
    {
      "name": "tianhunat-cli",
      "version": "1.0.0",
      "description": "",
      "main": "index.js",
      "scripts": {
        "test": "echo \"Error: no test specified\" && exit 1"
      },
      "keywords": [],
      "author": "",
      "license": "ISC"
    }
    ```

### 1.4 å®‰è£… CLI æ ¸å¿ƒä¾èµ–åŒ…ï¼ˆå« ora åŠ è½½ç¾åŒ–ï¼‰

åœ¨ `tianhunat-cli` ç›®å½•ï¼ˆCMD è·¯å¾„ `D:\tianhunat-cli>`ï¼‰æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®‰è£… 5 ä¸ªå¿…éœ€ä¾èµ–ï¼š

```Plain Text

npm install commander download-git-repo shelljs chalk ora --save
```

- ä¾èµ–è¯´æ˜ï¼ˆæ ¸å¿ƒåŠŸèƒ½ç¼ºä¸€ä¸å¯ï¼‰ï¼š

|    ä¾èµ–åŒ…å|    ä½œç”¨|    å…³é”®ç”¨é€”|
|---|---|---|
|    commander|    è§£æå‘½ä»¤è¡Œå‚æ•°ï¼ˆå¦‚ `init --admin`ï¼‰|    è¯†åˆ«ç”¨æˆ·è¾“å…¥çš„ç³»ç»Ÿç±»å‹|
|    download-git-repo|    ä» GitHub ä¸‹è½½æºç |    æ‹‰å– 4 å¥—ç³»ç»Ÿçš„æºç åˆ°ç”¨æˆ·æœ¬åœ°|
|    shelljs|    æ‰§è¡Œç»ˆç«¯å‘½ä»¤ï¼ˆå¦‚ `npm install`ï¼‰|    è‡ªåŠ¨å®‰è£…ç³»ç»Ÿä¾èµ–|
|    chalk|    ç¾åŒ–å‘½ä»¤è¡Œè¾“å‡ºé¢œè‰²|    çº¢è‰²é”™è¯¯æç¤ºã€ç»¿è‰²æˆåŠŸæç¤ºç­‰|
|    ora|    æ˜¾ç¤ºåŠ è½½åŠ¨ç”»|    ä¸‹è½½ã€å®‰è£…ä¾èµ–æ—¶æ˜¾ç¤ºæ—‹è½¬åŠ¨ç”»ï¼Œæå‡ä½“éªŒ|
- å®‰è£…æˆåŠŸæç¤ºï¼šç»ˆç«¯æ˜¾ç¤ºã€Œadded 5 packages in xxsã€ï¼Œ`tianhunat-cli` ç›®å½•æ–°å¢ `node_modules` æ–‡ä»¶å¤¹ï¼ˆä¾èµ–åŒ…å­˜æ”¾ç›®å½•ï¼‰å’Œ `package-lock.json` æ–‡ä»¶ï¼ˆä¾èµ–ç‰ˆæœ¬é”å®šæ–‡ä»¶ï¼‰

### 1.5 åˆ›å»º CLI å…¥å£æ–‡ä»¶ï¼ˆæ ¸å¿ƒä»£ç æ–‡ä»¶ï¼‰

#### 1.5.1 åˆ›å»º bin æ–‡ä»¶å¤¹å’Œ cli.js æ–‡ä»¶

åœ¨ CMD ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆWindows 10 æ–°å»ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶çš„æ ‡å‡†æŒ‡ä»¤ï¼‰ï¼š

```Plain Text

:: åœ¨ tianhunat-cli ç›®å½•ä¸‹åˆ›å»º bin æ–‡ä»¶å¤¹ï¼ˆå­˜æ”¾å…¥å£æ–‡ä»¶ï¼‰
mkdir bin

:: è¿›å…¥ bin æ–‡ä»¶å¤¹
cd bin

:: åˆ›å»º CLI å…¥å£æ–‡ä»¶ cli.jsï¼ˆWindows æ–°å»ºç©ºæ–‡ä»¶æŒ‡ä»¤ï¼‰
type nul > cli.js
```

æ‰§è¡Œåï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```Plain Text

tianhunat-cli/
â”œâ”€ bin/
â”‚  â””â”€ cli.js ï¼ˆå…¥å£æ–‡ä»¶ï¼‰
â”œâ”€ node_modules/
â”œâ”€ package.json
â””â”€ package-lock.json
```

#### 1.5.2 ç¼–å†™ cli.js ä»£ç ï¼ˆé›†æˆ ora åŠ è½½åŠ¨ç”»ï¼‰

ç”¨ VS Code æˆ–è®°äº‹æœ¬æ‰“å¼€ `bin/cli.js` æ–‡ä»¶ï¼ˆæ¨è VS Codeï¼Œæ”¯æŒä»£ç é«˜äº®å’Œè¯­æ³•æ£€æŸ¥ï¼‰ï¼Œç²˜è´´ä»¥ä¸‹å®Œæ•´ä»£ç ï¼ˆ**å¿…é¡»æ›¿æ¢ ** **`ä½ çš„GitHubç”¨æˆ·å`** ** ä¸ºçœŸå®å€¼**ï¼Œå…± 4 å¤„ï¼‰ï¼š

```JavaScript

#!/usr/bin/env node
// ç¬¬ä¸€è¡Œå¿…é¡»å†™è¿™ä¸ªï¼Œå‘Šè¯‰ Windows ç³»ç»Ÿè¿™æ˜¯ Node.js å¯æ‰§è¡Œæ–‡ä»¶

// å¯¼å…¥æ‰€æœ‰ä¾èµ–åŒ…
const { Command } = require('commander');
const download = require('download-git-repo');
const shell = require('shelljs');
const chalk = require('chalk');
const ora = require('ora'); // å¯¼å…¥ ora åŠ è½½åŠ¨ç”»å·¥å…·

// æ ¸å¿ƒé…ç½®ï¼šGitHub ä»“åº“åœ°å€æ˜ å°„ï¼ˆæ›¿æ¢æˆä½ çš„ GitHub ç”¨æˆ·åï¼å…± 4 å¤„ï¼‰
const REPO_MAP = {
  admin: 'tianhukj/Nat-Admin',    // ç®¡ç†ç³»ç»Ÿä»“åº“
  query: 'tianhukj/Nat-Result-t0',    // æŸ¥è¯¢ç³»ç»Ÿä»“åº“
  reserve: 'tianhukj/Nat-Result',// é¢„çº¦ç³»ç»Ÿä»“åº“
  dashboard: 'tianhukj/nat-data// å¤§æ•°æ®çœ‹æ¿ä»“åº“
};

// åˆå§‹åŒ–å‘½ä»¤è¡Œå·¥å…·
const program = new Command();
program
  .name('tianhunat') // å‘½ä»¤åï¼ˆç”¨æˆ·è¾“å…¥çš„æ ¸å¿ƒå‘½ä»¤ï¼‰
  .description('å¤©äº’æ ¸é…¸æ£€æµ‹ç³»ç»Ÿ Windows ä¸€é”®å®‰è£…å·¥å…·ï¼ˆé›†æˆåŠ è½½åŠ¨ç”»ï¼‰')
  .version('1.0.0', '-v, --version') // ç‰ˆæœ¬å·ï¼ˆåç»­æ›´æ–°éœ€ä¿®æ”¹ï¼‰
  .usage('init [--admin/--query/--reserve/--dashboard]'); // ä½¿ç”¨æç¤º

// æ ¸å¿ƒå‘½ä»¤ï¼šinitï¼ˆç”¨æˆ·æ‰§è¡Œ tianhunat init --xxx æ—¶è§¦å‘ï¼‰
program
  .command('init')
  .description('ä¸‹è½½æŒ‡å®šæ ¸é…¸æ£€æµ‹ç³»ç»Ÿå¹¶è‡ªåŠ¨å®‰è£…ä¾èµ–')
  .option('--admin', 'å®‰è£…ã€ç®¡ç†ç³»ç»Ÿã€‘')
  .option('--query', 'å®‰è£…ã€æŸ¥è¯¢ç³»ç»Ÿã€‘')
  .option('--reserve', 'å®‰è£…ã€é¢„çº¦ç³»ç»Ÿã€‘')
  .option('--dashboard', 'å®‰è£…ã€å¤§æ•°æ®çœ‹æ¿ã€‘')
  .action((options) => {
    // 1. åˆ¤æ–­ç”¨æˆ·é€‰æ‹©çš„ç³»ç»Ÿï¼ˆåªèƒ½é€‰ä¸€ä¸ªï¼‰
    let selectedSystem = null;
    for (const key in options) {
      if (options[key]) {
        selectedSystem = key;
        break;
      }
    }

    // 2. æœªé€‰æ‹©ç³»ç»Ÿåˆ™æç¤ºé”™è¯¯å¹¶é€€å‡º
    if (!selectedSystem) {
      console.log(chalk.red('\nâŒ é”™è¯¯ï¼šè¯·æŒ‡å®šè¦å®‰è£…çš„ç³»ç»Ÿï¼'));
      console.log(chalk.yellow('âœ… æ­£ç¡®ç¤ºä¾‹ï¼š'));
      console.log(chalk.yellow('   tianhunat init --admin   ï¼ˆå®‰è£…ç®¡ç†ç³»ç»Ÿï¼‰'));
      console.log(chalk.yellow('   tianhunat init --query   ï¼ˆå®‰è£…æŸ¥è¯¢ç³»ç»Ÿï¼‰'));
      console.log(chalk.yellow('   tianhunat init --reserve ï¼ˆå®‰è£…é¢„çº¦ç³»ç»Ÿï¼‰'));
      console.log(chalk.yellow('   tianhunat init --dashboard ï¼ˆå®‰è£…å¤§æ•°æ®çœ‹æ¿ï¼‰\n'));
      return;
    }

    // 3. è·å–å½“å‰é€‰æ‹©ç³»ç»Ÿçš„ GitHub ä»“åº“åœ°å€å’Œæœ¬åœ°é¡¹ç›®æ–‡ä»¶å¤¹å
    const repoUrl = REPO_MAP[selectedSystem]; // å¯¹åº” GitHub ä»“åº“åœ°å€
    const projectDir = `tianhunat-${selectedSystem}`; // æœ¬åœ°ç”Ÿæˆçš„æ–‡ä»¶å¤¹åï¼ˆå¦‚ tianhunat-adminï¼‰

    // 4. åˆå§‹åŒ–æºç ä¸‹è½½çš„åŠ è½½åŠ¨ç”»ï¼ˆora æ ¸å¿ƒåŠŸèƒ½ï¼‰
    const downloadSpinner = ora({
      text: chalk.blue(`ğŸš€ æ­£åœ¨ä¸‹è½½ã€${selectedSystem}ã€‘ç³»ç»Ÿæºç ...`),
      spinner: 'dots', // åŠ è½½åŠ¨ç”»æ ·å¼ï¼ˆå¯é€‰ï¼Œé»˜è®¤ dotsï¼Œåç»­å¯è‡ªå®šä¹‰ï¼‰
      color: 'blue' // åŠ¨ç”»é¢œè‰²
    }).start(); // å¯åŠ¨åŠ¨ç”»

    // 5. ä» GitHub ä¸‹è½½æºç ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰
    download(
      repoUrl,          // GitHub ä»“åº“åœ°å€
      projectDir,       // æœ¬åœ°ç”Ÿæˆçš„é¡¹ç›®æ–‡ä»¶å¤¹å
      { clone: true },  // ä½¿ç”¨ git clone æ–¹å¼ä¸‹è½½ï¼ˆæ›´ç¨³å®šï¼Œæ”¯æŒå¤§æ–‡ä»¶ï¼‰
      (err) => {
        if (err) {
          // ä¸‹è½½å¤±è´¥ï¼šåœæ­¢åŠ¨ç”»ï¼Œæ ‡è®°å¤±è´¥çŠ¶æ€ï¼ˆçº¢è‰² âŒï¼‰
          downloadSpinner.fail(chalk.red(`âŒ æºç ä¸‹è½½å¤±è´¥ï¼é”™è¯¯åŸå› ï¼š${err.message}`));
          console.log(chalk.gray('\nğŸ’¡ æ’æŸ¥å»ºè®®ï¼š'));
          console.log(chalk.gray('   1. æ£€æŸ¥ GitHub ä»“åº“æ˜¯å¦ä¸º Publicï¼ˆå¿…é¡»å…¬å¼€ï¼‰'));
          console.log(chalk.gray('   2. æ£€æŸ¥ç½‘ç»œæ˜¯å¦èƒ½è®¿é—® GitHubï¼ˆå¯æ‰“å¼€æµè§ˆå™¨è®¿é—®ä»“åº“åœ°å€æµ‹è¯•ï¼‰'));
          console.log(chalk.gray('   3. ç¡®è®¤ CLI ä»£ç ä¸­ REPO_MAP çš„ä»“åº“åœ°å€æ˜¯å¦æ­£ç¡®'));
          console.log(chalk.gray('   4. æ£€æŸ¥ Git æ˜¯å¦å®‰è£…å¹¶é…ç½®ç¯å¢ƒå˜é‡ï¼ˆCMD è¾“å…¥ git --version éªŒè¯ï¼‰\n'));
          return;
        }

        // ä¸‹è½½æˆåŠŸï¼šåœæ­¢åŠ¨ç”»ï¼Œæ ‡è®°æˆåŠŸçŠ¶æ€ï¼ˆç»¿è‰² âœ…ï¼‰
        downloadSpinner.succeed(chalk.green(`âœ… æºç ä¸‹è½½å®Œæˆï¼æœ¬åœ°ç›®å½•ï¼š./${projectDir}`));

        // 6. åˆå§‹åŒ–ä¾èµ–å®‰è£…çš„åŠ è½½åŠ¨ç”»
        const installSpinner = ora({
          text: chalk.blue('ğŸ”§ æ­£åœ¨è‡ªåŠ¨å®‰è£…ä¾èµ–ï¼ˆå¯èƒ½éœ€è¦ 3-10 åˆ†é’Ÿï¼Œè¯·è€å¿ƒç­‰å¾…ï¼‰...'),
          spinner: 'circle', // ä¸åŒé˜¶æ®µç”¨ä¸åŒåŠ¨ç”»æ ·å¼ï¼ŒåŒºåˆ†æµç¨‹
          color: 'blue'
        }).start();

        // 7. æ£€æŸ¥ npm æ˜¯å¦å¯ç”¨ï¼ˆé¿å…ç”¨æˆ·æœªå®‰è£… Node.jsï¼‰
        if (!shell.which('npm')) {
          installSpinner.fail(chalk.red('âŒ æœªæ£€æµ‹åˆ° npm ç¯å¢ƒï¼'));
          console.log(chalk.gray('\nğŸ’¡ æ’æŸ¥å»ºè®®ï¼š'));
          console.log(chalk.gray('   1. æ£€æŸ¥ Node.js æ˜¯å¦å®‰è£…ï¼ˆCMD è¾“å…¥ node -v éªŒè¯ï¼‰'));
          console.log(chalk.gray('   2. å®‰è£… Node.js æ—¶æ˜¯å¦å‹¾é€‰ã€ŒAdd to PATHã€ï¼ˆç¯å¢ƒå˜é‡ï¼‰'));
          console.log(chalk.gray('   3. é‡å¯ CMD ç»ˆç«¯åé‡è¯•\n'));
          return;
        }

        // 8. è¿›å…¥é¡¹ç›®ç›®å½•ï¼Œæ‰§è¡Œ npm install å®‰è£…ä¾èµ–
        shell.cd(projectDir); // è¿›å…¥æœ¬åœ°ç”Ÿæˆçš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼ˆå¦‚ tianhunat-adminï¼‰
        // æ‰§è¡Œ npm installï¼Œéšè—å†—ä½™æ—¥å¿—ï¼ˆåªæ˜¾ç¤ºå…³é”®ä¿¡æ¯ï¼‰
        const installProcess = shell.exec('npm install --silent', { async: true });

        // 9. ç›‘å¬ä¾èµ–å®‰è£…ç»“æœ
        installProcess.on('exit', (code) => {
          if (code === 0) {
            // ä¾èµ–å®‰è£…æˆåŠŸï¼šåœæ­¢åŠ¨ç”»ï¼Œæ ‡è®°æˆåŠŸ
            installSpinner.succeed(chalk.green('ğŸ‰ ä¾èµ–å®‰è£…å®Œæˆï¼'));
            console.log(chalk.yellow('\nğŸ‘‰ ä¸‹ä¸€æ­¥æ“ä½œï¼ˆå¤åˆ¶æ‰§è¡Œå³å¯ï¼‰ï¼š'));
            console.log(chalk.yellow(`   1. è¿›å…¥é¡¹ç›®ç›®å½•ï¼šcd ${projectDir}`));
            console.log(chalk.yellow(`   2. å¯åŠ¨ç³»ç»Ÿï¼šnpm run start`));
            console.log(chalk.gray(`\nğŸ’¡ å¯åŠ¨åï¼Œæµè§ˆå™¨è®¿é—® http://localhost:3000ï¼ˆå…·ä½“ç«¯å£ä»¥ç³»ç»Ÿé…ç½®ä¸ºå‡†ï¼Œå¯æŸ¥çœ‹é¡¹ç›® READMEï¼‰\n`));
          } else {
            // ä¾èµ–å®‰è£…å¤±è´¥ï¼šåœæ­¢åŠ¨ç”»ï¼Œæ ‡è®°å¤±è´¥
            installSpinner.fail(chalk.red('âŒ ä¾èµ–å®‰è£…å¤±è´¥ï¼'));
            console.log(chalk.gray('\nğŸ’¡ æ‰‹åŠ¨å®‰è£…å»ºè®®ï¼š'));
            console.log(chalk.gray(`   1. æ‰“å¼€ CMDï¼Œè¿›å…¥é¡¹ç›®ç›®å½•ï¼šcd ${projectDir}`));
            console.log(chalk.gray('   2. æ‰‹åŠ¨æ‰§è¡Œä¾èµ–å®‰è£…ï¼šnpm install'));
            console.log(chalk.gray('   3. è‹¥ä»å¤±è´¥ï¼Œå¯å°è¯•åˆ‡æ¢ npm æºï¼šnpm config set registry https://registry.npmmirror.com/\n'));
          }
        });
      }
    );
  });

// è§£æç”¨æˆ·è¾“å…¥çš„å‘½ä»¤è¡Œå‚æ•°ï¼ˆå¿…é¡»æ”¾åœ¨æœ€åï¼‰
program.parse(process.argv);
```

### 1.6 é…ç½® package.jsonï¼ˆå…³é”®ï¼šæ˜ å°„ CLI å‘½ä»¤ï¼‰

ç”¨ VS Code æˆ–è®°äº‹æœ¬æ‰“å¼€ `tianhunat-cli` æ ¹ç›®å½•çš„ `package.json` æ–‡ä»¶ï¼Œæ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹ï¼ˆ**å¿…é¡»æ›¿æ¢ ** **`ä½ çš„npmç”¨æˆ·å`** ** å’Œ ** **`ä½ çš„é‚®ç®±`** ** ä¸ºçœŸå®å€¼**ï¼‰ï¼š

```JSON

{
  "name": "tianhunat", // npm åŒ…åï¼ˆç”¨æˆ·å®‰è£…æ—¶è¾“å…¥çš„åŒ…åï¼Œå¿…é¡»å”¯ä¸€ï¼‰
  "version": "1.0.0", // ç‰ˆæœ¬å·ï¼ˆåç»­æ›´æ–°éœ€é€’å¢ï¼Œå¦‚ 1.0.1ã€1.1.0ï¼‰
  "description": "å¤©äº’æ ¸é…¸æ£€æµ‹ç³»ç»Ÿ Windows ä¸€é”®å®‰è£… CLI å·¥å…·ï¼ˆé›†æˆ ora åŠ è½½åŠ¨ç”»ï¼‰",
  "main": "bin/cli.js", // é¡¹ç›®ä¸»å…¥å£æ–‡ä»¶
  "bin": {
    "tianhunat": "./bin/cli.js" // æ ¸å¿ƒæ˜ å°„ï¼šå‘½ä»¤å â†’ å…¥å£æ–‡ä»¶ï¼ˆç”¨æˆ·è¾“å…¥ tianhunat è§¦å‘ï¼‰
  },
  "keywords": ["æ ¸é…¸æ£€æµ‹ç³»ç»Ÿ", "windows", "cli", "nodejs", "ä¸€é”®å®‰è£…", "ora"],
  "author": "ä½ çš„npmç”¨æˆ·å <ä½ çš„é‚®ç®±>", // npm å‘å¸ƒè€…ä¿¡æ¯ï¼ˆéœ€ä¸ npm è´¦å·ä¸€è‡´ï¼‰
  "license": "MIT", // å¼€æºåè®®ï¼ˆé»˜è®¤ MIT å³å¯ï¼‰
  "dependencies": {
    "chalk": "^5.3.0",
    "commander": "^12.0.0",
    "download-git-repo": "^3.0.2",
    "shelljs": "^0.8.5",
    "ora": "^8.0.1" // ora ä¾èµ–å·²è‡ªåŠ¨æ·»åŠ ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹
  },
  "engines": {
    "node": ">=16.0.0" // æœ€ä½æ”¯æŒçš„ Node.js ç‰ˆæœ¬ï¼ˆé¿å…æ—§ç‰ˆæœ¬å…¼å®¹é—®é¢˜ï¼‰
  }
}
```

- å…³é”®è¯´æ˜ï¼š

    - `bin` å­—æ®µï¼šæ˜¯ CLI å·¥å…·çš„æ ¸å¿ƒé…ç½®ï¼Œç”¨æˆ·å…¨å±€å®‰è£…åï¼Œè¾“å…¥ `tianhunat` å³å¯è§¦å‘ `./bin/cli.js` æ–‡ä»¶

    - `name` å­—æ®µï¼š`tianhunat` æ˜¯ npm åŒ…åï¼Œå¿…é¡»å”¯ä¸€ï¼ˆå‘å¸ƒå‰éœ€å» npm å®˜ç½‘æœç´¢éªŒè¯ï¼Œè‹¥å·²è¢«å ç”¨éœ€ä¿®æ”¹ï¼‰

    - `engines` å­—æ®µï¼šé™åˆ¶ Node.js æœ€ä½ç‰ˆæœ¬ï¼Œé¿å…å› ç”¨æˆ·ç‰ˆæœ¬è¿‡ä½å¯¼è‡´ `ora` ç­‰ä¾èµ–æŠ¥é”™

---

## æ­¥éª¤ 2ï¼šWindows 10 æœ¬åœ°æµ‹è¯• CLI å·¥å…·ï¼ˆå…³é”®ï¼šé¿å…å‘å¸ƒåå‡ºé”™ï¼‰

### 2.1 å…¨å±€é“¾æ¥æœ¬åœ° CLI åŒ…ï¼ˆæ¨¡æ‹Ÿç”¨æˆ·å®‰è£…ï¼‰

åœ¨ `tianhunat-cli` æ ¹ç›®å½•ï¼ˆCMD è·¯å¾„ `D:\tianhunat-cli>`ï¼‰æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°†æœ¬åœ°é¡¹ç›®é“¾æ¥ä¸ºå…¨å±€å‘½ä»¤ï¼š

```Plain Text

npm link
```

- æ‰§è¡ŒæˆåŠŸæç¤ºï¼š`C:\Users\ä½ çš„ç”¨æˆ·å\AppData\Roaming\npm\node_modules\tianhunat -> D:\tianhunat-cli`

- åŸç†ï¼šç›¸å½“äºåœ¨æœ¬åœ°æ¨¡æ‹Ÿç”¨æˆ·å®‰è£… `tianhunat` åŒ…ï¼Œåç»­å¯åœ¨ä»»æ„ç›®å½•æ‰§è¡Œ `tianhunat` å‘½ä»¤æµ‹è¯•

### 2.2 æµ‹è¯•æ ¸å¿ƒå‘½ä»¤ï¼ˆä»¥ç®¡ç†ç³»ç»Ÿä¸ºä¾‹ï¼‰

1. æ‰“å¼€ **æ–°çš„ CMD ç»ˆç«¯**ï¼ˆç¡®ä¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼Œé¿å…æ—§ç»ˆç«¯ç¼“å­˜ï¼‰

2. é€‰æ‹©æµ‹è¯•ç›®å½•ï¼ˆå¦‚æ¡Œé¢ï¼Œä¾¿äºæŸ¥çœ‹ç”Ÿæˆçš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼‰ï¼š

    ```Plain Text
    
    :: è¿›å…¥æ¡Œé¢ï¼ˆé»˜è®¤è·¯å¾„ï¼Œè‹¥æ¡Œé¢è·¯å¾„ä¸åŒå¯è‡ªè¡Œä¿®æ”¹ï¼‰
    cd C:\Users\ä½ çš„ç”¨æˆ·å\Desktop
    ```

3. æ‰§è¡Œ CLI å®‰è£…å‘½ä»¤ï¼š

    ```Plain Text
    
    tianhunat init --admin
    ```

4. æ­£å¸¸æµç¨‹çš„åŠ¨ç”»å’Œè¾“å‡ºæ•ˆæœï¼ˆå…³é”®éªŒè¯ç‚¹ï¼‰ï¼š

    - é˜¶æ®µ 1ï¼šæ˜¾ç¤ºè“è‰²æ—‹è½¬åŠ¨ç”» + ã€Œæ­£åœ¨ä¸‹è½½ã€adminã€‘ç³»ç»Ÿæºç ...ã€

    - é˜¶æ®µ 2ï¼šä¸‹è½½æˆåŠŸåï¼ŒåŠ¨ç”»å˜ä¸ºç»¿è‰² âœ… + ã€Œæºç ä¸‹è½½å®Œæˆï¼æœ¬åœ°ç›®å½•ï¼š./tianhunat-adminã€

    - é˜¶æ®µ 3ï¼šæ˜¾ç¤ºè“è‰²åœ†å½¢æ—‹è½¬åŠ¨ç”» + ã€Œæ­£åœ¨è‡ªåŠ¨å®‰è£…ä¾èµ–...ã€

    - é˜¶æ®µ 4ï¼šä¾èµ–å®‰è£…æˆåŠŸåï¼ŒåŠ¨ç”»å˜ä¸ºç»¿è‰² âœ… + ã€Œä¾èµ–å®‰è£…å®Œæˆï¼ã€ï¼Œå¹¶æ˜¾ç¤ºå¯åŠ¨æ­¥éª¤

5. éªŒè¯æ–‡ä»¶ï¼šæ¡Œé¢ä¼šç”Ÿæˆ `tianhunat-admin` æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€ååŒ…å«ä» GitHub ä¸‹è½½çš„æºç å’Œ `node_modules` ä¾èµ–æ–‡ä»¶å¤¹

### 2.3 æµ‹è¯•é—®é¢˜æ’æŸ¥ï¼ˆWindows 10 å¸¸è§é—®é¢˜ï¼‰

|é—®é¢˜ç°è±¡|é”™è¯¯åŸå› |è§£å†³æ–¹æ¡ˆ|
|---|---|---|
|è¾“å…¥ `tianhunat` æç¤ºã€Œä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤ã€|npm link å¤±è´¥ï¼Œç¯å¢ƒå˜é‡æœªç”Ÿæ•ˆ|1. é‡æ–°æ‰§è¡Œ `npm link`ï¼ˆç®¡ç†å‘˜æ¨¡å¼ï¼‰ï¼›2. é‡å¯ CMD ç»ˆç«¯ï¼›3. æ£€æŸ¥ Node.js ç¯å¢ƒå˜é‡ï¼ˆç³»ç»Ÿå˜é‡ PATH ä¸­æ˜¯å¦æœ‰ `C:\Users\ä½ çš„ç”¨æˆ·å\AppData\Roaming\npm`ï¼‰|
|ä¸‹è½½åŠ¨ç”»å¡ä½ï¼Œæœ€ç»ˆæç¤ºã€Œgit is not installedã€|æœªå®‰è£… Git æˆ– Git æœªé…ç½®ç¯å¢ƒå˜é‡|1. é‡æ–°å®‰è£… Gitï¼Œå‹¾é€‰ã€ŒUse Git from Command Promptã€ï¼›2. é‡å¯ CMD ç»ˆç«¯ï¼›3. è¾“å…¥ `git --version` éªŒè¯|
|ä¸‹è½½å¤±è´¥æç¤ºã€Œ404 Not Foundã€|GitHub ä»“åº“åœ°å€é”™è¯¯æˆ–ä»“åº“æœªå…¬å¼€|1. æ£€æŸ¥ `cli.js` ä¸­ `REPO_MAP` çš„ä»“åº“åœ°å€æ˜¯å¦æ­£ç¡®ï¼›2. ç¡®è®¤ GitHub ä»“åº“æ˜¯ Public çŠ¶æ€|
|ä¾èµ–å®‰è£…åŠ¨ç”»å¡ä½ï¼Œæœ€ç»ˆå¤±è´¥|npm æºé€Ÿåº¦æ…¢æˆ–ä¾èµ–å†²çª|1. åˆ‡æ¢ npm æºä¸ºæ·˜å®é•œåƒï¼š`npm config set registry https://registry.npmmirror.com/`ï¼›2. æ‰‹åŠ¨è¿›å…¥é¡¹ç›®ç›®å½•æ‰§è¡Œ `npm install`|
|åŠ¨ç”»æ˜¾ç¤ºä¹±ç |Windows CMD ç¼–ç é—®é¢˜|1. æ‰“å¼€ CMD â†’ å³é”®æ ‡é¢˜æ  â†’ å±æ€§ â†’ é€‰é¡¹ â†’ å‹¾é€‰ã€Œä½¿ç”¨ Unicode UTF-8 ç¼–ç ã€ï¼›2. é‡å¯ CMD ç»ˆç«¯|
### 2.4 æµ‹è¯•æˆåŠŸåå–æ¶ˆæœ¬åœ°é“¾æ¥ï¼ˆå¯é€‰ï¼‰

æµ‹è¯•æ— è¯¯åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å–æ¶ˆå…¨å±€é“¾æ¥ï¼ˆé¿å…å½±å“åç»­å‘å¸ƒçš„æ­£å¼åŒ…ï¼‰ï¼š

```Plain Text

npm unlink -g tianhunat
```

- å–æ¶ˆæˆåŠŸåï¼Œè¾“å…¥ `tianhunat` ä¼šæç¤ºã€Œä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤ã€ï¼Œè¡¨ç¤ºé“¾æ¥å·²ç§»é™¤

---

## æ­¥éª¤ 3ï¼šå‘å¸ƒ CLI åŒ…åˆ° npmï¼ˆä¾›ç”¨æˆ·ä¸‹è½½ä½¿ç”¨ï¼‰

### 3.1 åˆ‡æ¢ npm æºä¸ºå®˜æ–¹æºï¼ˆå¿…é¡»ï¼Œå¦åˆ™æ— æ³•å‘å¸ƒï¼‰

Windows ç³»ç»Ÿé»˜è®¤å¯èƒ½æ˜¯æ·˜å®é•œåƒï¼Œéœ€åˆ‡æ¢å› npm å®˜æ–¹æºæ‰èƒ½å‘å¸ƒåŒ…ï¼Œæ‰§è¡Œï¼š

```Plain Text

npm config set registry https://registry.npmjs.org/
```

- éªŒè¯æºï¼šæ‰§è¡Œ `npm config get registry`ï¼Œè¾“å‡º `https://registry.npmjs.org/` å³æˆåŠŸ

### 3.2 ç™»å½• npm è´¦å·ï¼ˆéœ€éªŒè¯é‚®ç®±ï¼‰

åœ¨ `tianhunat-cli` æ ¹ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç™»å½•ä½ çš„ npm è´¦å·ï¼š

```Plain Text

npm login
```

- æŒ‰æç¤ºä¾æ¬¡è¾“å…¥ï¼ˆè¾“å…¥å¯†ç æ—¶ä¸æ˜¾ç¤ºå­—ç¬¦ï¼Œç›´æ¥å›è½¦å³å¯ï¼‰ï¼š

    1. Usernameï¼šä½ çš„ npm ç”¨æˆ·åï¼ˆæ³¨å†Œæ—¶è®¾ç½®ï¼‰

    2. Passwordï¼šä½ çš„ npm å¯†ç 

    3. Emailï¼šä½ çš„ npm æ³¨å†Œé‚®ç®±ï¼ˆå¿…é¡»å·²éªŒè¯ï¼Œå¦åˆ™æ— æ³•å‘å¸ƒï¼‰

    4. OTPï¼šé‚®ç®±æ”¶åˆ°çš„éªŒè¯ç ï¼ˆnpm å®‰å…¨éªŒè¯ï¼Œè¾“å…¥åå›è½¦ï¼‰

- ç™»å½•æˆåŠŸæç¤ºï¼š`Logged in as ä½ çš„ç”¨æˆ·å on https://registry.npmjs.org/`

### 3.3 éªŒè¯ npm åŒ…åå”¯ä¸€æ€§ï¼ˆé¿å…å‘å¸ƒå¤±è´¥ï¼‰

ç¡®ä¿ `package.json` ä¸­çš„ `name` å­—æ®µï¼ˆå³ `tianhunat`ï¼‰æœªè¢«ä»–äººå ç”¨ï¼š

- è®¿é—® [npm å®˜ç½‘æœç´¢é¡µé¢](https://www.npmjs.com/search?q=tianhunat)

- è‹¥æœç´¢ç»“æœä¸­æ— åŒååŒ…ï¼Œè¯´æ˜å¯ç”¨ï¼›è‹¥å·²è¢«å ç”¨ï¼Œéœ€ä¿®æ”¹ `package.json` çš„ `name` å­—æ®µï¼ˆå¦‚ `tianhunat-nucleic-acid`ï¼‰ï¼Œä¿®æ”¹åé‡æ–°æµ‹è¯•æœ¬åœ°é“¾æ¥

### 3.4 å‘å¸ƒ CLI åŒ…åˆ° npm

æ‰§è¡Œå‘å¸ƒå‘½ä»¤ï¼ˆç¡®ä¿å½“å‰ç›®å½•æ˜¯ `tianhunat-cli` æ ¹ç›®å½•ï¼‰ï¼š

```Plain Text

npm publish
```

- å‘å¸ƒæˆåŠŸæç¤ºï¼š`+ tianhunat@1.0.0`ï¼ˆç‰ˆæœ¬å·ä¸ `package.json` ä¸€è‡´ï¼‰

- æŸ¥çœ‹åŒ…ï¼šå‘å¸ƒåè®¿é—® `https://www.npmjs.com/package/tianhunat`ï¼ˆæ›¿æ¢ä¸ºä½ çš„åŒ…åï¼‰ï¼Œå¯çœ‹åˆ°åŒ…çš„è¯¦ç»†ä¿¡æ¯ï¼ˆå¦‚ç‰ˆæœ¬ã€ä¾èµ–ã€ä½œè€…ï¼‰

### 3.5 å‘å¸ƒååˆ‡æ¢å›æ·˜å®æºï¼ˆå¯é€‰ï¼ŒåŠ å¿«åç»­ä¸‹è½½ï¼‰

å‘å¸ƒå®Œæˆåï¼Œå¯åˆ‡æ¢å›æ·˜å®æºï¼Œé¿å…åç»­å®‰è£…ä¾èµ–é€Ÿåº¦æ…¢ï¼š

```Plain Text

npm config set registry https://registry.npmmirror.com/
```

---

## æ­¥éª¤ 4ï¼šWindows 10 ç”¨æˆ·ä½¿ç”¨æµç¨‹ï¼ˆç»™ç”¨æˆ·çš„è¯´æ˜ä¹¦ï¼‰

å‘å¸ƒæˆåŠŸåï¼ŒWindows 10 ç”¨æˆ·åªéœ€ 3 æ­¥å³å¯å®‰è£…å’Œä½¿ç”¨ä½ çš„æ ¸é…¸æ£€æµ‹ç³»ç»Ÿï¼Œä»¥ä¸‹æ˜¯ç»™ç”¨æˆ·çš„å®Œæ•´æ“ä½œæŒ‡å—ï¼š

### 4.1 ç”¨æˆ·å®‰è£… CLI å·¥å…·ï¼ˆå…¨å±€ï¼‰

æ‰“å¼€ CMD ç»ˆç«¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆç®¡ç†å‘˜æ¨¡å¼æ›´ä½³ï¼Œé¿å…æƒé™é—®é¢˜ï¼‰ï¼š

```Plain Text

:: å®‰è£… CLI å·¥å…·ï¼ˆå…¨å±€å®‰è£…ï¼Œä¸€æ¬¡å®‰è£…ç»ˆèº«ä½¿ç”¨ï¼‰
npm install -g tianhunat
```

- è‹¥å®‰è£…æ…¢ï¼Œå¯å…ˆåˆ‡æ¢æ·˜å®æºï¼š

    ```Plain Text
    
    npm config set registry https://registry.npmmirror.com/
    npm install -g tianhunat
    ```

- éªŒè¯å®‰è£…ï¼šè¾“å…¥ `tianhunat -v`ï¼Œæ˜¾ç¤ºç‰ˆæœ¬å·ï¼ˆå¦‚ `1.0.0`ï¼‰å³æˆåŠŸ

### 4.2 ç”¨æˆ·å®‰è£…æŒ‡å®šæ ¸é…¸æ£€æµ‹ç³»ç»Ÿ

ç”¨æˆ·åœ¨ CMD ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆé€‰æ‹©éœ€è¦çš„ç³»ç»Ÿï¼ŒäºŒé€‰ä¸€å³å¯ï¼‰ï¼š

|ç³»ç»Ÿç±»å‹|ç”¨æˆ·æ‰§è¡Œå‘½ä»¤|ç”Ÿæˆçš„æœ¬åœ°æ–‡ä»¶å¤¹å|
|---|---|---|
|ç®¡ç†ç³»ç»Ÿ|`tianhunat init --admin`|tianhunat-admin|
|æŸ¥è¯¢ç³»ç»Ÿ|`tianhunat init --query`|tianhunat-query|
|é¢„çº¦ç³»ç»Ÿ|`tianhunat init --reserve`|tianhunat-reserve|
|å¤§æ•°æ®çœ‹æ¿|`tianhunat init --dashboard`|tianhunat-dashboard|
- ç¤ºä¾‹ï¼šå®‰è£…ç®¡ç†ç³»ç»Ÿï¼Œç”¨æˆ·æ‰§è¡Œ `tianhunat init --admin` åï¼Œä¼šè‡ªåŠ¨ä¸‹è½½æºç å¹¶å®‰è£…ä¾èµ–ï¼Œå…¨ç¨‹æ˜¾ç¤ºåŠ è½½åŠ¨ç”»

### 4.3 ç”¨æˆ·å¯åŠ¨ç³»ç»Ÿ

ä»¥ç®¡ç†ç³»ç»Ÿä¸ºä¾‹ï¼Œç”¨æˆ·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨ï¼š

```Plain Text

:: 1. è¿›å…¥ç³»ç»Ÿç›®å½•ï¼ˆç”Ÿæˆçš„æ–‡ä»¶å¤¹åï¼‰
cd tianhunat-admin

:: 2. å¯åŠ¨ç³»ç»Ÿï¼ˆéœ€ç¡®ä¿é¡¹ç›® package.json ä¸­æœ‰ start è„šæœ¬ï¼‰
npm run start
```

- å¯åŠ¨æˆåŠŸåï¼Œç”¨æˆ·æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`ï¼ˆå…·ä½“ç«¯å£ä»¥ä½ çš„ç³»ç»Ÿé…ç½®ä¸ºå‡†ï¼Œå¯åœ¨é¡¹ç›® README ä¸­è¯´æ˜ï¼‰

- å…¶ä»–ç³»ç»Ÿå¯åŠ¨æ­¥éª¤ç›¸åŒï¼Œåªéœ€å°† `cd tianhunat-admin` æ›¿æ¢ä¸ºå¯¹åº”æ–‡ä»¶å¤¹åï¼ˆå¦‚ `cd tianhunat-query`ï¼‰

---

## æ­¥éª¤ 5ï¼šCLI å·¥å…·åç»­ç»´æŠ¤ï¼ˆWindows 10 ç¯å¢ƒï¼‰

### 5.1 ç‰ˆæœ¬æ›´æ–°ï¼ˆä¿®å¤ Bug æˆ–æ–°å¢åŠŸèƒ½ï¼‰

1. æœ¬åœ°ä¿®æ”¹ä»£ç ï¼ˆå¦‚ä¿®å¤ `cli.js` çš„é€»è¾‘é”™è¯¯ã€æ–°å¢ç³»ç»Ÿç±»å‹ï¼‰

2. æ›´æ–° `package.json` çš„ `version` å­—æ®µï¼ˆéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼šä¿®å¤ Bug å‡è¡¥ä¸ç‰ˆ 1.0.1ï¼Œæ–°å¢åŠŸèƒ½å‡å°ç‰ˆæœ¬ 1.1.0ï¼Œé‡å¤§æ›´æ–°å‡å¤§ç‰ˆæœ¬ 2.0.0ï¼‰

3. æ‰§è¡Œå‘å¸ƒå‘½ä»¤ï¼ˆéœ€é‡æ–°ç™»å½• npm è´¦å·ï¼Œè‹¥å·²é€€å‡ºï¼‰ï¼š

    ```Plain Text
    
    npm login
    npm publish
    ```

4. ç”¨æˆ·æ›´æ–° CLI å·¥å…·ï¼š`npm update -g tianhunat`

### 5.2 æ–°å¢ç³»ç»Ÿç±»å‹ï¼ˆå¦‚æ–°å¢ç»Ÿè®¡ç³»ç»Ÿï¼‰

1. åœ¨ GitHub æ–°å»ºå…¬å¼€ä»“åº“ `tianhunat-statistics`ï¼Œä¸Šä¼ ç»Ÿè®¡ç³»ç»Ÿæºç 

2. ä¿®æ”¹æœ¬åœ° `cli.js` çš„ `REPO_MAP`ï¼Œæ–°å¢ä¸€æ¡æ˜ å°„ï¼š

    ```JavaScript
    
    const REPO_MAP = {
      // åŸæœ‰ç³»ç»Ÿ...
      statistics: 'ä½ çš„GitHubç”¨æˆ·å/tianhunat-statistics'
    };
    ```

3. åœ¨ `program.command('init')` ä¸­æ–°å¢ `option`ï¼š

    ```JavaScript
    
    .option('--statistics', 'å®‰è£…ã€ç»Ÿè®¡ç³»ç»Ÿã€‘')
    ```

4. æ›´æ–° `package.json` ç‰ˆæœ¬å·ï¼Œé‡æ–°å‘å¸ƒåˆ° npm

### 5.3 å¸è½½å·²å‘å¸ƒçš„ npm åŒ…ï¼ˆç´§æ€¥æƒ…å†µï¼‰

è‹¥å‘å¸ƒé”™è¯¯ç‰ˆæœ¬ï¼Œå¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ é™¤åŒ…ï¼ˆå‘å¸ƒå 72 å°æ—¶å†…å¯åˆ é™¤ï¼‰ï¼š

```Plain Text

npm unpublish tianhunat@1.0.0 --force
```

- æ³¨æ„ï¼š`@` åæ˜¯ç‰ˆæœ¬å·ï¼Œéœ€æŒ‡å®šå…·ä½“ç‰ˆæœ¬ï¼›åˆ é™¤å 24 å°æ—¶å†…ä¸å¯é‡æ–°å‘å¸ƒåŒååŒç‰ˆæœ¬åŒ…

---

## Windows 10 ä¸“å±æ³¨æ„äº‹é¡¹ï¼ˆå¼€å‘è€…å¿…çœ‹ï¼‰

1. **è·¯å¾„å…¼å®¹**ï¼šä»£ç ä¸­å·²å¤„ç† Windows è·¯å¾„åˆ†éš”ç¬¦ï¼ˆ`\` å’Œ `/`ï¼‰ï¼Œæ— éœ€é¢å¤–ä¿®æ”¹ï¼Œé¿å…ä½¿ç”¨ä¸­æ–‡è·¯å¾„

2. **Git ä¾èµ–**ï¼šç”¨æˆ·å¿…é¡»å®‰è£… Gitï¼Œå¦åˆ™ `download-git-repo` æ— æ³•ä¸‹è½½æºç ï¼ŒCLI å·²æ·»åŠ é”™è¯¯æç¤º

3. **Node.js ç‰ˆæœ¬**ï¼š`ora` 8.x æ”¯æŒ Node.js v16+ï¼Œ`package.json` å·²é™åˆ¶ `engines: { "node": ">=16.0.0" }`ï¼Œé¿å…å…¼å®¹é—®é¢˜

4. **npm æƒé™**ï¼šç”¨æˆ·æ‰§è¡Œ `npm install -g` æ—¶è‹¥æç¤ºæƒé™ä¸è¶³ï¼Œéœ€å³é”® CMD é€‰æ‹©ã€Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€

5. **åŠ¨ç”»æ ·å¼è‡ªå®šä¹‰**ï¼š`ora` æ”¯æŒå¤šç§åŠ è½½åŠ¨ç”»ï¼Œå¯ä¿®æ”¹ `spinner` å‚æ•°ï¼ˆå¦‚ `spinner: 'line'`ã€`spinner: 'star'`ï¼‰ï¼Œæ›´å¤šæ ·å¼å‚è€ƒ [ora å®˜æ–¹æ–‡æ¡£](https://github.com/sindresorhus/ora#spinners)

6. **æ—¥å¿—éšè—**ï¼šä¾èµ–å®‰è£…æ—¶ä½¿ç”¨ `npm install --silent` éšè—å†—ä½™æ—¥å¿—ï¼Œåªæ˜¾ç¤ºåŠ è½½åŠ¨ç”»ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
> ï¼ˆæ³¨ï¼šæ–‡æ¡£éƒ¨åˆ†å†…å®¹å¯èƒ½ç”± AI ç”Ÿæˆï¼‰
